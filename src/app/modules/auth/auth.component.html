<nsjdc-action-bar
  [title]="isLogging ? 'Login' : 'Sign Up'"
  [hasMenu]="false"
></nsjdc-action-bar>
<StackLayout class="form" [formGroup]="form">
  <StackLayout class="input-field">
    <Label
      class="label"
      text="Email"
      [ngClass]="{
        invalid: form.controls.email.touched && !form.controls.email.valid
      }"
    ></Label>
    <TextField
      class="input"
      returnKeyType="next"
      autocorrect="false"
      autocapitalizationType="none"
      formControlName="email"
      (returnPress)="focusPassword()"
    >
    </TextField>
    <Label
      *ngIf="form.controls.email.touched && !form.controls.email.valid"
      text="field required"
    ></Label>
  </StackLayout>
  <StackLayout class="input-field">
    <Label
      class="label"
      text="password"
      [ngClass]="{
        invalid: form.controls.password.touched && !form.controls.password.valid
      }"
    ></Label>
    <TextField
      class="input"
      returnKeyType="done"
      required
      [secure]="true"
      hint="Min 6 characters"
      name="passwordControl"
      formControlName="password"
      #passwordField
    ></TextField>
    <Label
      *ngIf="form.controls.password.touched && !form.controls.password.valid"
      text="field required"
    ></Label>
  </StackLayout>
  <StackLayout class="input-field" *ngIf="!isLogging">
    <Label
      class="label"
      text="Confirm password"
      [ngClass]="{
        invalid:
          form.controls.confirmPassword.touched &&
          !form.controls.confirmPassword.valid
      }"
    ></Label>
    <TextField
      class="input"
      returnKeyType="done"
      required
      [secure]="true"
      hint="Min 6 characters"
      formControlName="confirmPassword"
    ></TextField>
    <Label
      *ngIf="
        form.controls.confirmPassword.touched &&
        !form.controls.confirmPassword.valid
      "
      text="field required"
    ></Label>
    <Label
      *ngIf="
        form.controls.confirmPassword.touched &&
        !form.controls.confirmPassword.valid
      "
      text="field required"
    ></Label>
    <Label
      *ngIf="
        form.controls.password.touched &&
        form.controls.confirmPassword.dirty &&
        form.errors?.mustMatch
      "
      text="passwords must match"
    ></Label>
  </StackLayout>

  <Button
    class="btn -flat"
    (tap)="toggleLogin()"
    [text]="!isLogging ? 'Login instead' : 'Sign Up instead'"
  ></Button>
  <Button
    class="btn -primary -rounded-lg"
    [text]="isLogging ? 'Login' : 'Sign Up'"
    (tap)="onAuth()"
  ></Button>
</StackLayout>
